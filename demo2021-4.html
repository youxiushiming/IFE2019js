<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>caixukun</title>
    </head>
    <body>
            <div id="fade-obj" style="width:300px;height:300px;background:rgb(0,0,0)"></div>
            <button id="fade-btn" >淡出</button>
    </body>
    <script>
    var arr1=document.getElementById("fade-obj");
    var arr2=document.getElementById("fade-btn");
    var opacity = 1;
    arr2.onclick=change1();
    function change1(){
        if(opacity){
            setTimeout(change1,100);
            opacity = Math.floor((opacity-0.02)*100)/100;
            arr1.style.opacity=opacity.toString();
            console.log(opacity);
            arr2.disabled=true;
        }else{
            arr2.disabled=false;
            arr2.innerText="淡入";
            arr2.addEventListener("click",change2);
        }
    }
    function change2(){
        if(opacity!==1){
            setTimeout(change2,100);
            opacity = Math.floor((opacity+0.02)*100)/100;
            if(1-opacity<=0.01)
            opacity=Math.floor(opacity+0.02);
            arr1.style.opacity=opacity.toString();
            console.log(opacity);
            arr2.disabled=true;
        }else{
            arr2.disabled=false;
            arr2.innerText="淡出";
            arr2.addEventListener("click",change1);
        }
    }
    </script>
</html>
